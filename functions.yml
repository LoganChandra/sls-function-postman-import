get_site:
    handler: functions/sites/get-site/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-site
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-site-by-id:
    handler: functions/sites/get-site-by-id/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-site-by-id
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get_site_username:
    handler: functions/sites/get-site-username/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-site-username
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-site-by-scope:
    handler: functions/sites/get-site-by-scope/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'logan.chandra@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-site-by-scope
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get_all_site:
    handler: functions/sites/get-all-sites/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/site/list
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get_permission:
    handler: functions/groups/get-group/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/permission
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get_permission-details:
    handler: functions/groups/get-group-detail/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/permission/{role}
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

delete_permission:
    handler: functions/groups/delete-group/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/permission/{role}
              method: DELETE
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

update_permission:
    handler: functions/groups/update-group/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/permission/{role}
              method: PATCH
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

post_permission:
    handler: functions/groups/post-group/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/permission
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

add-user:
    handler: functions/users/add-user/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - cognitoUserPool:
              pool: ${self:provider.environment.MCDN_USER_POOL}
              trigger: PreSignUp
              existing: true

update-user:
    handler: functions/users/update-user/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user
              method: PATCH
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-users:
    handler: functions/users/get-users/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/users
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-user-details:
    handler: functions/users/get-user-details/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user/detail/{id}
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-user-email:
    handler: functions/users/get-user-email/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user/email/{email}
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

# For MCDN
get-user-role:
    handler: functions/users/get-user-role/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: logan.chandra@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user/role/{user_id}
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

list-user-role:
    handler: functions/users/list-user-role/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: logan.chandra@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user/list/role
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

delete-user:
    handler: functions/users/delete-user/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/user/delete/{id}
              method: DELETE
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-configs:
    handler: functions/configs/get-configs/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/configs/{setting}
              method: GET
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

delete-config:
    handler: functions/configs/delete-user-config/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/configs/delete/{id}
              method: DELETE
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

add-access-log:
    handler: functions/access-logs/post-logs/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - sqs:
              arn: !ImportValue mcdn-mgmt-bff-${sls:stage}-access-log-queue
              batchSize: 10

add-mcdn-access-log:
    handler: functions/access-logs/post-mcdn-logs/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - sqs:
              arn: !ImportValue mcdn-bff-${sls:stage}-access-log-queue
              batchSize: 10

get-access-log:
    handler: functions/access-logs/get-logs/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/access-logs/list
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-mcdn-log:
    handler: functions/access-logs/get-mcdn-logs/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/mcdn-logs/list
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-site-usage:
    handler: functions/usage/get-site-usage/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: shashenta.rao@ecloudvalley.com
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/site-usage/list
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

# CERTIFICATES
get-cert-by-scope:
    handler: functions/certificate/get-cert-by-scope/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'logan.chandra@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-cert-by-scope
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get-cert:
    handler: functions/certificate/get-cert/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'logan.chandra@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/get-cert
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

delete-cert:
    handler: functions/certificate/delete-cert/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'logan.chandra@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/delete-cert/{certId}
              method: delete
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

update-cert:
    handler: functions/certificate/update-cert/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'logan.chandra@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/update-cert
              method: patch
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false

get_invalidation:
    handler: functions/invalidations/get-invalidation/handler.lambda_handler
    timeout: 30
    memorySize: 256
    reservedConcurrency: 15
    tags:
        CreatedBy: 'shashenta.rao@ecloudvalley.com'
        Environment: ${sls:stage}
        ProjectName: 'ECV MCDN'
        ServiceName: mcdn-dynamodb-${sls:stage}
    events:
        - http:
              path: dynamodb/invalidation/list
              method: POST
              cors:
                  origin: '*'
                  headers:
                      - Content-Type
                      - X-Amz-Date
                      - Authorization
                      - X-Api-Key
                      - X-Amz-Security-Token
                      - X-Amz-User-Agent
                  allowCredentials: false
